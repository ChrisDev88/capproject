## Generated mta.yaml based on template version 0.2.0
## appName = cockpitcap
## language=java; multiTenant=false
## approuter=
_schema-version: "3.1"
ID: cockpitcap
version: 1.0.0
description: "Generated by cds-services-archetype"
parameters:
  enable-parallel-deployments: true
build-parameters:
  before-all:
    - builder: custom
      commands:
        - npm install

modules:
  # ---------------- DATABASE MODULE ----------------------
  - name: cockpitcap-db
    type: hdb
    path: db
    build-parameters:
      ignore: ["node_modules/"]
    parameters:
      memory: 256M
      disk-quota: 256M
    requires:
      - name: cockpitcap-db-hdi-container
  # ---------------- SERVER MODULE ----------------------
  - name: cockpitcap
    type: java
    path: srv
    properties:
      EXIT: 1 # required by deploy.js task to terminate
    build-parameters:
      builder: custom
      commands: [mvn clean package]
      build-result: "target/*.[wj]ar"
    provides:
      - name: srv_api
        properties:
          url: ${default-url}
    requires:
      - name: cockpitcap-db-hdi-container
  # ---------------- OData V2 PROXY MODULE ----------------------
  - name: cockpitcapv2
    type: nodejs
    path: odatav2-proxy
    build-parameters:
      ignore: ["node_modules/"]
    parameters:
      memory: 256M
      disk-quota: 1G
    provides:
      - name: srv_api_v2
        properties:
          url: "${default-url}"
    requires:
      - name: srv_api
        properties:
          srv_api_url: ~{url}
resources:
  - name: cockpitcap-db-hdi-container
    parameters:
      service: hanatrial
      service-plan: hdi-shared
    type: com.sap.xs.hdi-container
    properties:
      hdi-container-name: ${service-name}
